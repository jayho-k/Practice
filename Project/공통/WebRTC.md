# WebRTC



#### NAT

- 네트워크 주소 변환 (Network Address Tranlation)
  
  - IP 패킷의 TCP/UDP포트 숫자와 소스 및 목적지의 IP주소등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술을 말함

- 사용 이유
  
  - 대개 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP주소를 사용하여 인터넷에 접속하기 위함 (공유기 같은 걸로 묶고 싶기 때문에 사용하는 기술)
  
  - 인터넷의 공인 IP주소를 절약할 수 있음
  
  - 인터넷이라는 공공망과 연결괴는 사용자들의 고유한 사설망을 침입자들로부터 보호할 수 있다는 점 (방화벽 사용)



#### STUN, TURN

**STUN**

- **Session Traversal Utilities for NAT**

- 단말이 자신의 공인 IP주소와 포트를 확인하는 과정에 대한 프로토콜

- 즉 STUN서버는 인터넷의 복잡한 주소들 속에서 **유일하게 자기 자신을 식별**할 수 있는 정보를 반환해준다 
  
  - WebRTC연결을 시작전 STUN서버를 향해 요청
  
  - STUN서버는 NAT뒤에 있는 PEER들이 서로 연결할 수 있도록 공인 IP와 포트를 찾아준다. 
  
  - 즉 우리집 주소를 알아내는 것 => 다른사람이 찾아오도록 하기 위해



**TURN**

- **Traversal Using Relay NAT**

- STUN서버를 통해 자기자신의 주소를 찾지 못할 경우
  
  - 라우터들의 다른 방화벽 정책
  
  - 이전에 연결된 적이 있는 네트워크만 연결할 수 있게 제한
    (Symmetric NAT)

- TURN 방식은 네트워크 미디어를 중개하는 서버
  
  - 중간에 서버를 한 번 더 거친다.
  
  - 따라서 P2P통신이 아님 (Peer to Peer)
  
  - 구조상 지연이 필연적으로 발생
  
  - 따라서 최후의 수단으로 사용된다.





#### Candidate

- 후보
  
  - STUN, TURN서버를 이용해서 획득했던 IP주소와 프로토콜, 포트의 조합으로 구성된 연결 가능한 네트워크 주소들 

- Finding Candidate
  
  - 후보를 찾기위한 과정

- 일반적으로 3개의 주소를 얻게 된다
  
  - 




































